import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,b as o,o as i}from"./app-DEultsK1.js";const l={};function n(c,e){return i(),a("div",null,e[0]||(e[0]=[o('<p>åœ¨å°ç¨‹åºä¸­ä½¿ç”¨ç½‘ç»œç›¸å…³çš„ API æ—¶ï¼Œéœ€è¦æ³¨æ„ä¸‹åˆ—é—®é¢˜ï¼Œè¯·å¼€å‘è€…æå‰äº†è§£ã€‚</p><h2 id="_1-æœåŠ¡å™¨åŸŸåé…ç½®" tabindex="-1"><a class="header-anchor" href="#_1-æœåŠ¡å™¨åŸŸåé…ç½®"><span>1. æœåŠ¡å™¨åŸŸåé…ç½®</span></a></h2><p>æ¯ä¸ªå¾®ä¿¡å°ç¨‹åºéœ€è¦äº‹å…ˆè®¾ç½®ä¸€ä¸ªé€šè®¯åŸŸåï¼Œå°ç¨‹åºåªå¯ä»¥è·ŸæŒ‡å®šçš„åŸŸåä¸è¿›è¡Œç½‘ç»œé€šä¿¡ã€‚åŒ…æ‹¬æ™®é€š HTTPS è¯·æ±‚(<code>wx.request</code>)ã€ä¸Šä¼ æ–‡ä»¶(<code>wx.uploadFile</code>)ã€ä¸‹è½½æ–‡ä»¶(<code>wx.downloadFile</code>) å’Œ WebSocket é€šä¿¡(<code>wx.connectSocket</code>)</p><h3 id="é…ç½®æµç¨‹" tabindex="-1"><a class="header-anchor" href="#é…ç½®æµç¨‹"><span>é…ç½®æµç¨‹</span></a></h3><p>æœåŠ¡å™¨åŸŸåè¯·åœ¨ ã€Œå°ç¨‹åºåå°-è®¾ç½®-å¼€å‘è®¾ç½®-æœåŠ¡å™¨åŸŸåã€ ä¸­è¿›è¡Œé…ç½®ï¼Œé…ç½®æ—¶éœ€è¦æ³¨æ„:</p><ul><li>åŸŸååªæ”¯æŒ HTTPS (<code>wx.request</code>ã€<code>wx.uploadFile</code>ã€<code>wx.downloadFile</code>) å’Œ wss (<code>wx.connectSocket</code>) åè®®ï¼›</li><li>åŸŸåä¸èƒ½ä½¿ç”¨ IP åœ°å€æˆ– localhostï¼›</li><li>å¯ä»¥é…ç½®ç«¯å£ï¼Œå¦‚ <code>https://myserver.com:8080</code>ï¼Œä½†æ˜¯é…ç½®ååªèƒ½å‘ <code>https://myserver.com:8080</code> å‘èµ·è¯·æ±‚ã€‚</li><li>å¦‚æœä¸é…ç½®ç«¯å£ã€‚å¦‚ <code>https://myserver.com</code>ï¼Œé‚£ä¹ˆè¯·æ±‚çš„ URL ä¸­ä¹Ÿä¸èƒ½åŒ…å«ç«¯å£ï¼Œç”šè‡³æ˜¯é»˜è®¤çš„ 443 ç«¯å£ä¹Ÿä¸å¯ä»¥ã€‚</li><li>åŸŸåå¿…é¡»ç»è¿‡ ICP å¤‡æ¡ˆï¼›</li><li>å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œ<code>api.weixin.qq.com</code> ä¸èƒ½è¢«é…ç½®ä¸ºæœåŠ¡å™¨åŸŸåï¼Œç›¸å…³ API ä¹Ÿä¸èƒ½åœ¨å°ç¨‹åºå†…è°ƒç”¨ã€‚å¼€å‘è€…åº”å°† AppSecret ä¿å­˜åˆ°åå°æœåŠ¡å™¨ä¸­ï¼Œé€šè¿‡æœåŠ¡å™¨ä½¿ç”¨ getAccessToken æ¥å£è·å– access_tokenï¼Œå¹¶è°ƒç”¨ç›¸å…³ APIï¼›</li></ul><p>å¯¹äºæ¯ä¸ªæ¥å£ï¼Œåˆ†åˆ«å¯ä»¥é…ç½®æœ€å¤š 20 ä¸ªåŸŸåã€‚</p><h2 id="_2-ç½‘ç»œè¯·æ±‚" tabindex="-1"><a class="header-anchor" href="#_2-ç½‘ç»œè¯·æ±‚"><span>2. ç½‘ç»œè¯·æ±‚</span></a></h2><h3 id="è¶…æ—¶æ—¶é—´" tabindex="-1"><a class="header-anchor" href="#è¶…æ—¶æ—¶é—´"><span>è¶…æ—¶æ—¶é—´</span></a></h3><p>é»˜è®¤è¶…æ—¶æ—¶é—´å’Œæœ€å¤§è¶…æ—¶æ—¶é—´éƒ½æ˜¯ 60sï¼›</p><p>è¶…æ—¶æ—¶é—´å¯ä»¥åœ¨ <code>app.json</code> ä¸­é€šè¿‡ <code>networktimeout</code> é…ç½®ã€‚</p><h3 id="ä½¿ç”¨é™åˆ¶" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨é™åˆ¶"><span>ä½¿ç”¨é™åˆ¶</span></a></h3><ol><li><p>ç½‘ç»œè¯·æ±‚çš„ referer header ä¸å¯è®¾ç½®ã€‚å…¶æ ¼å¼å›ºå®šä¸º <code>https://servicewechat.com/{appid}/{version}/page-frame.html</code>ï¼Œå…¶ä¸­ <code>{appid}</code> ä¸ºå°ç¨‹åºçš„ appidï¼Œ<code>{version}</code> ä¸ºå°ç¨‹åºçš„ç‰ˆæœ¬å·ï¼Œç‰ˆæœ¬å·ä¸º <code>0</code> è¡¨ç¤ºä¸ºå¼€å‘ç‰ˆã€ä½“éªŒç‰ˆä»¥åŠå®¡æ ¸ç‰ˆæœ¬ï¼Œç‰ˆæœ¬å·ä¸º <code>devtools</code> è¡¨ç¤ºä¸ºå¼€å‘è€…å·¥å…·ï¼Œå…¶ä½™ä¸ºæ­£å¼ç‰ˆæœ¬ã€‚</p><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><p>å› ä¸ºå°ç¨‹åºå¿…å®šå¸¦ä¸Šç‰¹å®š Headerï¼Œåœ¨åç«¯çš„ API å¤„ç†ä¸Šå°±å¯ä»¥åˆ¤æ–­ Headerï¼Œæ£€æµ‹åˆ°åªæœ‰æ˜¯è‡ªå·±å°ç¨‹åºæ—¶æ‰å…è®¸è°ƒç”¨æ¥å£ï¼Œå¦åˆ™ç›´æ¥æ‹’ç»è®¿é—®ã€‚</p></div></li><li><p>wx.requestã€wx.uploadFileã€wx.downloadFile çš„æœ€å¤§å¹¶å‘é™åˆ¶æ˜¯ 10 ä¸ªï¼›</p></li></ol><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><p>æ‰€ä»¥ä¸€å®šè¦é¿å…åŒæ—¶å‘é€è¿‡å¤šçš„ç½‘ç»œè¯·æ±‚</p></div><ol><li>å°ç¨‹åºè¿›å…¥åå°è¿è¡Œå(éç½®é¡¶èŠå¤©)ï¼Œå¦‚æœ 5s å†…ç½‘ç»œè¯·æ±‚æ²¡æœ‰ç»“æŸï¼Œä¼šå›è°ƒé”™è¯¯ä¿¡æ¯ <code>fail interrupted</code>ï¼›åœ¨å›åˆ°å‰å°ä¹‹å‰ï¼Œç½‘ç»œè¯·æ±‚æ¥å£è°ƒç”¨éƒ½ä¼šæ— æ³•è°ƒç”¨ã€‚</li></ol><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><p>æ‰€ä»¥é‡è¦è¯·æ±‚çš„ <code>fail</code> æµç¨‹ä¸€å®šè¦å¦¥å–„å¤„ç†ï¼Œå¯ä»¥è€ƒè‰å†æ¬¡è¿›è¡Œä¸€æ¬¡æˆ–ä¸¤æ¬¡é‡è¯•æˆ–æ˜ç¡®æç¤ºç”¨æˆ·è¯·æ±‚å¤±è´¥è®©å…¶æ‰‹åŠ¨é‡è¯•</p></div><h3 id="è¿”å›å€¼ç¼–ç " tabindex="-1"><a class="header-anchor" href="#è¿”å›å€¼ç¼–ç "><span>è¿”å›å€¼ç¼–ç </span></a></h3><ol><li><p>å»ºè®®æœåŠ¡å™¨è¿”å›å€¼ä½¿ç”¨ UTF-8 ç¼–ç ã€‚å¯¹äºé UTF-8 ç¼–ç ï¼Œå°ç¨‹åºä¼šå°è¯•è¿›è¡Œè½¬æ¢ï¼Œä½†æ˜¯ä¼šæœ‰è½¬æ¢å¤±è´¥çš„å¯èƒ½ã€‚</p></li><li><p>å°ç¨‹åºä¼šè‡ªåŠ¨å¯¹ BOM å¤´è¿›è¡Œè¿‡æ»¤(åªè¿‡æ»¤ä¸€ä¸ª BOM å¤´)ã€‚</p></li></ol><h3 id="å›è°ƒå‡½æ•°" tabindex="-1"><a class="header-anchor" href="#å›è°ƒå‡½æ•°"><span>å›è°ƒå‡½æ•°</span></a></h3><p>åªè¦æˆåŠŸæ¥æ”¶åˆ°æœåŠ¡å™¨è¿”å›ï¼Œæ— è®º <code>statusCode</code> æ˜¯å¤šå°‘ï¼Œéƒ½ä¼šè¿›å…¥ <code>success</code> å›è°ƒã€‚è¯·å¼€å‘è€…æ ¹æ®ä¸šåŠ¡é€»è¾‘å¯¹è¿”å›å€¼è¿›è¡Œåˆ¤æ–­ã€‚</p><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><p>æ‰€ä»¥åœ¨è¯·æ±‚æˆåŠŸçš„æ—¶å€™ï¼Œä¹Ÿè¦åˆ¤æ–­è¯·æ±‚ç æ˜¯ä¸æ˜¯ 200ï¼Œå¹¶å¯¹å…¶ä»–çŠ¶æ€ç åšåˆç†çš„å¤„ç†ã€‚</p></div><h2 id="_3-å¸¸è§é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_3-å¸¸è§é—®é¢˜"><span>3. å¸¸è§é—®é¢˜</span></a></h2><h3 id="https-è¯ä¹¦" tabindex="-1"><a class="header-anchor" href="#https-è¯ä¹¦"><span>HTTPS è¯ä¹¦</span></a></h3><p>å°ç¨‹åºå¿…é¡»ä½¿ç”¨ HTTPS/WSS å‘èµ·ç½‘ç»œè¯·æ±‚ã€‚è¯·æ±‚æ—¶ç³»ç»Ÿä¼šå¯¹æœåŠ¡å™¨åŸŸåä½¿ç”¨çš„ HTTPS è¯ä¹¦è¿›è¡Œæ ¡éªŒï¼Œå¦‚æœæ ¡éªŒå¤±è´¥ï¼Œåˆ™è¯·æ±‚ä¸èƒ½æˆåŠŸå‘èµ·ã€‚ç”±äºç³»ç»Ÿé™åˆ¶ï¼Œä¸åŒå¹³å°å¯¹äºè¯ä¹¦è¦æ±‚çš„ä¸¥æ ¼ç¨‹åº¦ä¸åŒã€‚ä¸ºäº†ä¿è¯å°ç¨‹åºçš„å…¼å®¹æ€§ï¼Œå»ºè®®å¼€å‘è€…æŒ‰ç…§æœ€é«˜æ ‡å‡†è¿›è¡Œè¯ä¹¦é…ç½®ï¼Œå¹¶ä½¿ç”¨ç›¸å…³å·¥å…·æ£€æŸ¥ç°æœ‰è¯ä¹¦æ˜¯å¦ç¬¦åˆè¦æ±‚ã€‚</p><h3 id="è·³è¿‡åŸŸåæ ¡éªŒ" tabindex="-1"><a class="header-anchor" href="#è·³è¿‡åŸŸåæ ¡éªŒ"><span>è·³è¿‡åŸŸåæ ¡éªŒ</span></a></h3><p>åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ï¼Œå¯ä»¥ä¸´æ—¶å¼€å¯ å¼€å‘ç¯å¢ƒä¸æ ¡éªŒè¯·æ±‚åŸŸåã€TLS ç‰ˆæœ¬åŠ HTTPS è¯ä¹¦ é€‰é¡¹ï¼Œè·³è¿‡æœåŠ¡å™¨åŸŸåçš„æ ¡éªŒã€‚æ­¤æ—¶ï¼Œåœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­åŠæ‰‹æœºå¼€å¯è°ƒè¯•æ¨¡å¼æ—¶ï¼Œä¸ä¼šè¿›è¡ŒæœåŠ¡å™¨åŸŸåçš„æ ¡éªŒã€‚</p><p>åœ¨æœåŠ¡å™¨åŸŸåé…ç½®æˆåŠŸåï¼Œå»ºè®®å¼€å‘è€…å…³é—­æ­¤é€‰é¡¹è¿›è¡Œå¼€å‘ï¼Œå¹¶åœ¨å„å¹³å°ä¸‹è¿›è¡Œæµ‹è¯•ï¼Œä»¥ç¡®è®¤æœåŠ¡å™¨åŸŸåé…ç½®æ­£ç¡®ã€‚</p><p>å¦‚æœæ‰‹æœºä¸Šå‡ºç° â€œæ‰“å¼€è°ƒè¯•æ¨¡å¼å¯ä»¥å‘å‡ºè¯·æ±‚ï¼Œå…³é—­è°ƒè¯•æ¨¡å¼æ— æ³•å‘å‡ºè¯·æ±‚â€ çš„ç°è±¡ï¼Œè¯·ç¡®è®¤æ˜¯å¦è·³è¿‡äº†åŸŸåæ ¡éªŒï¼Œå¹¶ç¡®è®¤æœåŠ¡å™¨åŸŸåå’Œè¯ä¹¦é…ç½®æ˜¯å¦æ­£ç¡®ã€‚</p>',28)]))}const r=t(l,[["render",n],["__file","network.html.vue"]]),s=JSON.parse('{"path":"/code/mini-app/guide/ability/network.html","title":"ç½‘ç»œ","lang":"zh-CN","frontmatter":{"date":"2020-10-09T00:00:00.000Z","title":"ç½‘ç»œ","icon":"network","category":"å°ç¨‹åº","description":"åœ¨å°ç¨‹åºä¸­ä½¿ç”¨ç½‘ç»œç›¸å…³çš„ API æ—¶ï¼Œéœ€è¦æ³¨æ„ä¸‹åˆ—é—®é¢˜ï¼Œè¯·å¼€å‘è€…æå‰äº†è§£ã€‚ 1. æœåŠ¡å™¨åŸŸåé…ç½® æ¯ä¸ªå¾®ä¿¡å°ç¨‹åºéœ€è¦äº‹å…ˆè®¾ç½®ä¸€ä¸ªé€šè®¯åŸŸåï¼Œå°ç¨‹åºåªå¯ä»¥è·ŸæŒ‡å®šçš„åŸŸåä¸è¿›è¡Œç½‘ç»œé€šä¿¡ã€‚åŒ…æ‹¬æ™®é€š HTTPS è¯·æ±‚(wx.request)ã€ä¸Šä¼ æ–‡ä»¶(wx.uploadFile)ã€ä¸‹è½½æ–‡ä»¶(wx.downloadFile) å’Œ WebSocket é€šä¿¡(wx.co...","head":[["meta",{"property":"og:url","content":"https://liaorenhua.github.io/blog_postgraduate/blog_postgraduate/code/mini-app/guide/ability/network.html"}],["meta",{"property":"og:site_name","content":"ğ“›ğ“®ğ“¸ ğ“‘ğ“›ğ“¸ğ“–"}],["meta",{"property":"og:title","content":"ç½‘ç»œ"}],["meta",{"property":"og:description","content":"åœ¨å°ç¨‹åºä¸­ä½¿ç”¨ç½‘ç»œç›¸å…³çš„ API æ—¶ï¼Œéœ€è¦æ³¨æ„ä¸‹åˆ—é—®é¢˜ï¼Œè¯·å¼€å‘è€…æå‰äº†è§£ã€‚ 1. æœåŠ¡å™¨åŸŸåé…ç½® æ¯ä¸ªå¾®ä¿¡å°ç¨‹åºéœ€è¦äº‹å…ˆè®¾ç½®ä¸€ä¸ªé€šè®¯åŸŸåï¼Œå°ç¨‹åºåªå¯ä»¥è·ŸæŒ‡å®šçš„åŸŸåä¸è¿›è¡Œç½‘ç»œé€šä¿¡ã€‚åŒ…æ‹¬æ™®é€š HTTPS è¯·æ±‚(wx.request)ã€ä¸Šä¼ æ–‡ä»¶(wx.uploadFile)ã€ä¸‹è½½æ–‡ä»¶(wx.downloadFile) å’Œ WebSocket é€šä¿¡(wx.co..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-01-07T02:58:54.000Z"}],["meta",{"property":"article:published_time","content":"2020-10-09T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-01-07T02:58:54.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"ç½‘ç»œ\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2020-10-09T00:00:00.000Z\\",\\"dateModified\\":\\"2025-01-07T02:58:54.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Leo\\",\\"url\\":\\"https://liaorenhua.github.io/blog_postgraduate/\\"}]}"],["link",{"rel":"alternate","type":"application/atom+xml","href":"https://liaorenhua.github.io/blog_postgraduate/blog_postgraduate/atom.xml","title":"ğ“›ğ“®ğ“¸ ğ“‘ğ“›ğ“¸ğ“– Atom Feed"}],["link",{"rel":"alternate","type":"application/json","href":"https://liaorenhua.github.io/blog_postgraduate/blog_postgraduate/feed.json","title":"ğ“›ğ“®ğ“¸ ğ“‘ğ“›ğ“¸ğ“– JSON Feed"}],["link",{"rel":"alternate","type":"application/rss+xml","href":"https://liaorenhua.github.io/blog_postgraduate/blog_postgraduate/rss.xml","title":"ğ“›ğ“®ğ“¸ ğ“‘ğ“›ğ“¸ğ“– RSS Feed"}]]},"headers":[{"level":2,"title":"1. æœåŠ¡å™¨åŸŸåé…ç½®","slug":"_1-æœåŠ¡å™¨åŸŸåé…ç½®","link":"#_1-æœåŠ¡å™¨åŸŸåé…ç½®","children":[{"level":3,"title":"é…ç½®æµç¨‹","slug":"é…ç½®æµç¨‹","link":"#é…ç½®æµç¨‹","children":[]}]},{"level":2,"title":"2. ç½‘ç»œè¯·æ±‚","slug":"_2-ç½‘ç»œè¯·æ±‚","link":"#_2-ç½‘ç»œè¯·æ±‚","children":[{"level":3,"title":"è¶…æ—¶æ—¶é—´","slug":"è¶…æ—¶æ—¶é—´","link":"#è¶…æ—¶æ—¶é—´","children":[]},{"level":3,"title":"ä½¿ç”¨é™åˆ¶","slug":"ä½¿ç”¨é™åˆ¶","link":"#ä½¿ç”¨é™åˆ¶","children":[]},{"level":3,"title":"è¿”å›å€¼ç¼–ç ","slug":"è¿”å›å€¼ç¼–ç ","link":"#è¿”å›å€¼ç¼–ç ","children":[]},{"level":3,"title":"å›è°ƒå‡½æ•°","slug":"å›è°ƒå‡½æ•°","link":"#å›è°ƒå‡½æ•°","children":[]}]},{"level":2,"title":"3. å¸¸è§é—®é¢˜","slug":"_3-å¸¸è§é—®é¢˜","link":"#_3-å¸¸è§é—®é¢˜","children":[{"level":3,"title":"HTTPS è¯ä¹¦","slug":"https-è¯ä¹¦","link":"#https-è¯ä¹¦","children":[]},{"level":3,"title":"è·³è¿‡åŸŸåæ ¡éªŒ","slug":"è·³è¿‡åŸŸåæ ¡éªŒ","link":"#è·³è¿‡åŸŸåæ ¡éªŒ","children":[]}]}],"git":{"createdTime":1736126247000,"updatedTime":1736218734000,"contributors":[{"name":"liao_rh","username":"liao_rh","email":"993929808@qq.com","commits":3,"url":"https://github.com/liao_rh"}]},"readingTime":{"minutes":3.75,"words":1125},"filePathRelative":"code/mini-app/guide/ability/network.md","localizedDate":"2020å¹´10æœˆ9æ—¥","excerpt":"","autoDesc":true}');export{r as comp,s as data};
